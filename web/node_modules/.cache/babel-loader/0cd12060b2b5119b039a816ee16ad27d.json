{"ast":null,"code":"import _classCallCheck from \"/home/monja/PycharmProjects/GoVersus_Project/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/monja/PycharmProjects/GoVersus_Project/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/monja/PycharmProjects/GoVersus_Project/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/monja/PycharmProjects/GoVersus_Project/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/monja/PycharmProjects/GoVersus_Project/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/monja/PycharmProjects/GoVersus_Project/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/monja/PycharmProjects/GoVersus_Project/react_app/src/pages/onglets/messages/Message.js\";\nimport React from 'react';\nimport Messages from \"./Messages\";\nimport MustLoggedInPage from \"../../statics/MustLoggedInPage\";\nimport axios from \"axios\";\nimport UrlBackEnd from \"../../../models/UrlBackEnd\";\nimport UrlFrontEnd from \"../../../models/UrlFrontEnd\";\nvar Message = /*#__PURE__*/function (_React$Component) {\n  _inherits(Message, _React$Component);\n  function Message() {\n    var _this;\n    _classCallCheck(this, Message);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Message).call(this));\n    _this.changePage = function (page) {\n      _this.setState({\n        page: page\n      });\n    };\n    _this.state = {\n      errorMessage: '',\n      page: ''\n    };\n    _this.changePage = _this.changePage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n  _createClass(Message, [{\n    key: \"render\",\n    value: function render() {\n      return this.state.page;\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var _this2 = this;\n      // localStorage.setItem('key', 'value');\n      // const value = localStorage.getItem('key');\n      // localStorage.removeItem('key');\n      // const exists = localStorage.getItem('key') !== null;\n      // const data = { name: 'John', age: 30 };\n      // localStorage.setItem('user', JSON.stringify(data));\n      // const data = JSON.parse(localStorage.getItem('user'));\n      // console.log(data.name); // \"John\"\n      // console.log(data.age); // 30\n\n      var token = localStorage.getItem('GoVersus_token');\n      if (token == null) {\n        state.page = /*#__PURE__*/React.createElement(MustLoggedInPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 26\n          }\n        });\n      } else {\n        var url = UrlBackEnd + 'check_token/';\n        axios.post(url, \"email=\" + email + \"&password=\" + password).then(function (response) {\n          var result = response.data;\n          if (typeof result === 'string') {\n            _this2.setState({\n              errorMessage: result\n            });\n          } else {\n            // giving token and redirecting\n            localStorage.setItem('GoVersus_token', result['token']);\n            window.location.href = UrlFrontEnd;\n          }\n        }).catch(function (error) {\n          _this2.setState({\n            errorMessage: 'Error while sending request : \\n' + error.toString()\n          });\n        });\n        state.page = /*#__PURE__*/React.createElement(Messages, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 26\n          }\n        });\n      }\n    }\n  }]);\n  return Message;\n}(React.Component);\nexport default Message;","map":{"version":3,"names":["React","Messages","MustLoggedInPage","axios","UrlBackEnd","UrlFrontEnd","Message","changePage","page","setState","state","errorMessage","bind","props","token","localStorage","getItem","url","post","email","password","then","response","result","data","setItem","window","location","href","catch","error","toString","Component"],"sources":["/home/monja/PycharmProjects/GoVersus_Project/react_app/src/pages/onglets/messages/Message.js"],"sourcesContent":["import React from 'react';\nimport Messages from \"./Messages\";\nimport MustLoggedInPage from \"../../statics/MustLoggedInPage\";\nimport axios from \"axios\";\nimport UrlBackEnd from \"../../../models/UrlBackEnd\";\nimport UrlFrontEnd from \"../../../models/UrlFrontEnd\";\n\nclass Message extends React.Component{\n    constructor() {\n        super();\n        this.state = {\n            errorMessage: '',\n            page: ''\n        }\n\n        this.changePage = this.changePage.bind(this);\n\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        // localStorage.setItem('key', 'value');\n        // const value = localStorage.getItem('key');\n        // localStorage.removeItem('key');\n        // const exists = localStorage.getItem('key') !== null;\n        // const data = { name: 'John', age: 30 };\n        // localStorage.setItem('user', JSON.stringify(data));\n        // const data = JSON.parse(localStorage.getItem('user'));\n        // console.log(data.name); // \"John\"\n        // console.log(data.age); // 30\n\n        const token = localStorage.getItem('GoVersus_token')\n\n        if(token == null){\n\n            state.page = <MustLoggedInPage />\n        } else {\n            let url = UrlBackEnd + 'check_token/'\n            axios.post(url, \"email=\"+email+\"&password=\"+password)\n                .then(response => {\n                    let result = response.data;\n\n                    if(typeof(result) === 'string'){\n                        this.setState({\n                            errorMessage: result\n                        })\n                    }\n                    else{\n                        // giving token and redirecting\n                        localStorage.setItem('GoVersus_token', result['token'])\n                        window.location.href = UrlFrontEnd\n                    }\n                  })\n                  .catch(error => {\n                    this.setState({\n                        errorMessage : 'Error while sending request : \\n' + error.toString()\n                    });\n                  });\n\n            state.page = <Messages />\n\n        }\n\n    }\n\n    changePage =  (page) => {\n        this.setState({\n            page: page\n        })\n    }\n\n    render() {\n\n        return (this.state.page);\n    }\n}\n\nexport default Message;\n"],"mappings":";;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,gBAAgB,MAAM,gCAAgC;AAC7D,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,WAAW,MAAM,6BAA6B;AAAC,IAEhDC,OAAO;EAAA;EACT,mBAAc;IAAA;IAAA;IACV;IAAQ,MAuDZC,UAAU,GAAI,UAACC,IAAI,EAAK;MACpB,MAAKC,QAAQ,CAAC;QACVD,IAAI,EAAEA;MACV,CAAC,CAAC;IACN,CAAC;IA1DG,MAAKE,KAAK,GAAG;MACTC,YAAY,EAAE,EAAE;MAChBH,IAAI,EAAE;IACV,CAAC;IAED,MAAKD,UAAU,GAAG,MAAKA,UAAU,CAACK,IAAI,uDAAM;IAAC;EAEjD;EAAC;IAAA;IAAA,yBAqDQ;MAEL,OAAQ,IAAI,CAACF,KAAK,CAACF,IAAI;IAC3B;EAAC;IAAA;IAAA,yCAtD+BK,KAAK,EAAEH,KAAK,EAAE;MAAA;MAC1C;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA,IAAMI,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;MAEpD,IAAGF,KAAK,IAAI,IAAI,EAAC;QAEbJ,KAAK,CAACF,IAAI,gBAAG,oBAAC,gBAAgB;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,EAAG;MACrC,CAAC,MAAM;QACH,IAAIS,GAAG,GAAGb,UAAU,GAAG,cAAc;QACrCD,KAAK,CAACe,IAAI,CAACD,GAAG,EAAE,QAAQ,GAACE,KAAK,GAAC,YAAY,GAACC,QAAQ,CAAC,CAChDC,IAAI,CAAC,UAAAC,QAAQ,EAAI;UACd,IAAIC,MAAM,GAAGD,QAAQ,CAACE,IAAI;UAE1B,IAAG,OAAOD,MAAO,KAAK,QAAQ,EAAC;YAC3B,MAAI,CAACd,QAAQ,CAAC;cACVE,YAAY,EAAEY;YAClB,CAAC,CAAC;UACN,CAAC,MACG;YACA;YACAR,YAAY,CAACU,OAAO,CAAC,gBAAgB,EAAEF,MAAM,CAAC,OAAO,CAAC,CAAC;YACvDG,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAGvB,WAAW;UACtC;QACF,CAAC,CAAC,CACDwB,KAAK,CAAC,UAAAC,KAAK,EAAI;UACd,MAAI,CAACrB,QAAQ,CAAC;YACVE,YAAY,EAAG,kCAAkC,GAAGmB,KAAK,CAACC,QAAQ;UACtE,CAAC,CAAC;QACJ,CAAC,CAAC;QAERrB,KAAK,CAACF,IAAI,gBAAG,oBAAC,QAAQ;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,EAAG;MAE7B;IAEJ;EAAC;EAAA;AAAA,EAvDiBR,KAAK,CAACgC,SAAS;AAqErC,eAAe1B,OAAO"},"metadata":{},"sourceType":"module"}